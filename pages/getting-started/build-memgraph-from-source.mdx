---
title: Building Memgraph from source
description: This is a comprehensive guide for compiling Memgraph from source. It includes setting up the necessary toolchain, compiling the code, and running Memgraph.
---

import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'


# Building Memgraph from source

Follow this guide  if you want to compile a Memgraph from a source. Here you
will find all the necessary steps, including setting up the necessary toolchain,
compiling the code, and running Memgraph.

<Callout>

Memgraph uses `git` for source version control. You will need to install `git`
on your machine before you can download the source code.

</Callout>


<Callout>

If you are using Mac M1 or above, please check our [MacOS Lima Compilation
Guide](https://www.notion.so/MacOS-Lima-Compilation-Guide-eae1e9dcef5740579c5a41075b8f499b?pvs=21)
first.

</Callout>

## Obtaining the Source Code

After installing `git`, you are now ready to fetch your own copy of the Memgraph
source code. Run the following command:

```bash
git clone git@github.com:memgraph/memgraph.git
```

The above will create a `memgraph` directory and put all source code there.

In your terminal, position yourself in the obtained memgraph directory.

```bash
cd memgraph
```

There are three different methods for building Memgraph:

1. Using the `build.sh` script (Recommended)
2. Manually with `conan` and `cmake` (Advanced)
3. Docker (ideal for building on unsupported systems)

## Downloading the dependencies (required by methods 1 and 2)

Before you can compile Memgraph, you first need to download its dependencies.

Building Memgraph depends on some system-wide packages. The installation scripts
can be found under `environment/os/`. The directory contains a dependencies
management script for each supported operating system.

```bash
sudo ./environment/os/install_deps.sh install TOOLCHAIN_RUN_DEPS
sudo ./environment/os/install_deps.sh install MEMGRAPH_BUILD_DEPS
```

The first command installs all the packages necessary for the Memgraph toolchain
to work correctly. The second command installs the system-wide packages that are
not necessary for the toolchain but are required by Memgraph.

<Callout>
    
    Based on your OS, version and architecture, execute appropriate scripts (e.g., on **Debian 12**, NOTE: the following commands/scripts are located under [memgraph repository](https://github.com/memgraph/memgraph/tree/master/environment/os):
    
    ```bash
    sudo ./environment/os/debian-12.sh install TOOLCHAIN_RUN_DEPS
    sudo ./environment/os/debian-12.sh install MEMGRAPH_BUILD_DEPS
    ```
    
    For ARM look for `-arm` in the script name (e.g., on Ubuntu 24.04 with Apple M processor):
    
    ```bash
    sudo ./environment/os/ubuntu-24.04-arm.sh install TOOLCHAIN_RUN_DEPS
    sudo ./environment/os/ubuntu-24.04-arm.sh install MEMGRAPH_BUILD_DEPS
    ```
</Callout> 

Once everything is installed, you can proceed to the compilation.

## Toolchain installation procedure (required by methods 1 and 2)

Memgraph is compiled using our own custom toolchain that can be obtained from
the toolchain repository.  All our tools used in the development of Memgraph are
manually built for each OS and collected in an archive. Please refer to the
[`memgraph/environment`](https://github.com/memgraph/memgraph/tree/master/environment)
folder for all related code.

<Callout>

Keep in mind, `cargo` is also required to build Memgraph, follow the [official
Rust installation
guide](https://doc.rust-lang.org/cargo/getting-started/installation.html).

</Callout>

You should read the
[Toolchain](https://www.notion.so/Toolchain-37c37c84382149a58d09b2ccfcb410d7?pvs=21)
to install the appropriate toolchain for your distribution.

Download the toolchain for your operating system from one of the following links:

- [CentOS 9](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-centos-9-x86_64.tar.gz)
- [CentOS 10](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-centos-10-x86_64.tar.gz)
- [Debian 12 (x86_64)](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-debian-12-amd64.tar.gz)
- [Debian 12 (arm64)](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-debian-12-arm64.tar.gz)
- [Debian 13 (x86_64)](https://s3.eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-debian-13-amd64.tar.gz)
- [Debian 13 (arm64)](https://s3.eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-debian-13-arm64.tar.gz)
- [Fedora 42 (x86_64)](https://s3.eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-fedora-42-x86_64.tar.gz)
- [Fedora 42 (arm64)](https://s3.eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-fedora-42-aarch64.tar.gz)
- [Rocky Linux 10 (x86_64)](https://s3.eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-rocky-10-x86_64.tar.gz)
- [Ubuntu 22.04 (x86_64)](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-ubuntu-22.04-amd64.tar.gz)
- [Ubuntu 24.04 (x86_64)](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-ubuntu-24.04-amd64.tar.gz)
- [Ubuntu 24.04 (arm64)](https://s3-eu-west-1.amazonaws.com/deps.memgraph.io/toolchain-v7/toolchain-v7-binaries-ubuntu-24.04-arm64.tar.gz)

Extract the toolchain with the following command:

```bash
sudo tar xzvfm {{toolchain-archive}}.tar.gz -C /opt
```

<Callout>

After you have installed the toolchain, you should read the instructions for the
toolchain in the toolchain install directory (`/opt/toolchain-v7/README.md`)
and install dependencies that are necessary to run the toolchain.

</Callout>

If you have not already installed toolchain dependencies, please check and
install required toolchain runtime dependencies as in the section above.

<Callout>

If you put the toolchain on some other path, it’s possible to say to the `cmake`
the root is there, that is done by [setting `MG_TOOLCHAIN_ROOT` environment
variable](https://www.notion.so/If-you-put-toolchain-on-some-other-path-it-s-possible-to-say-to-the-cmake-there-the-root-is-that-s-e45311092e9a454eb73c720bf9ef04c1?pvs=21).

That’s also useful where you have different versions of libraries under system
compare to what the Memgraph build process needs. 

</Callout>

## Using the `build.sh` script

This method should be the easiest way to build Memgraph directly on a compatible host system. 

Calling the script with no arguments will build everything, including tests, for the `Release` build type:

```bash
./build.sh
```

Optionally you can specify target and build types, e.g.

```bash
./build.sh --target memgraph --build-type Debug
```

where the build type can be `Release` (default), `Debug` or `RelWithDebInfo`.


Other cmake options can be passed as well, e.g. to disable testing:

```bash
./build.sh --target memgraph --build-type Release -DMG_ENABLE_TESTING=OFF
```

The resulting binary will be in the `build/` directory.

## Using `conan` and `cmake`

This approach offers greater flexibility and granular control over the build process. 
While it performs the same operations as the `build.sh` script, it gives you direct access 
to configure individual build parameters and dependencies.

To build Memgraph using this method, follow these steps:

1. Create a Python virtual environment and install `conan`:
```bash
python3 -m venv env
source env/bin/activate
pip install conan
conan profile detect
```

2. Run the init script to fetch other libs required for the build:
```bash
./init
```

3. Install conan dependencies:
```bash
export MG_TOOLCHAIN_ROOT=/opt/toolchain-v7
conan install . --build=missing -pr ./memgraph_template_profile -s build_type=Release
source build/generators/conanbuild.sh
```

4. Configure the project with cmake - note that the name of the preset depends on the build type set in the previous step:
```bash
cmake --preset conan-release
```

5. Build the project (this will build everything, including tests):
```bash
cmake --build --preset conan-release -j$(nproc)
```

6. Or for a specific target (e.g. Memgraph binary):
```bash
cmake --build --preset conan-release --target memgraph -j$(nproc)
```


## Using Docker

Start by setting the environment variables for the desired OS, architecture, and build type:

```bash
export OS="ubuntu-24.04"
export ARCH="amd"  # or arm
export BUILD_TYPE="Release"
export TOOLCHAIN="v7"
```

Next, pull the appropriate Docker image for the build, e.g.:

```bash
docker pull memgraph/mgbuild:v7_ubuntu-24.04
```

Available image tags can be found [here](https://hub.docker.com/r/memgraph/mgbuild/tags).

Then spin up the container:

```bash
./release/package/mgbuild.sh \
  --toolchain $TOOLCHAIN \
  --os $OS \
  --arch $ARCH \
  --build-type $BUILD_TYPE \
  run
```

Then build Memgraph:
```bash
./release/package/mgbuild.sh \
  --toolchain $TOOLCHAIN \
  --os $OS \
  --arch $ARCH \
  --build-type $BUILD_TYPE \
  build-memgraph
```

Run Memgraph inside the container (the name of the container will look something like `mgbuild_v7_ubuntu-24.04`):
```bash
# find the name of the container
docker ps

# run Memgraph
docker exec -i mgbuild_v7_ubuntu-24.04 bash -c "cd /home/mg/memgraph && ./build/memgraph"
```

Stop the container:
```bash
./release/package/mgbuild.sh \
  --toolchain $TOOLCHAIN \
  --os $OS \
  --arch $ARCH \
  stop --remove
```

## Running Memgraph

After the compilation, verify that Memgraph works:

```bash
./memgraph --version
```

The unit tests can be run using:

```bash
ctest -R unit -j$(nproc)
```

Or in Docker:

```bash
./release/package/mgbuild.sh \
  --toolchain $TOOLCHAIN \
  --os $OS \
  --arch $ARCH \
  --enterprise-license $MEMGRAPH_ENTERPRISE_LICENSE \
  --organization-name $MEMGRAPH_ORGANIZATION_NAME \
  test-memgraph unit
```
