---
title: collections
description: Harness Memgraph's diverse collection functions to manipulate and transform graph data efficiently. Visualize the potential with detailed documentation and tutorials.
---

# collections

import { Callout } from 'nextra/components'

export const Highlight = ({children, color}) => (
<span
style={{
  backgroundColor: color,
  borderRadius: '2px',
  color: '#fff',
  padding: '0.2rem',
}}>
{children}
</span>
);

The collections module is a collection manipulation module that offers functions to work with lists in Cypher queries, allowing operations like filtering, sorting, and modification for efficient data handling.

[![docs-source](https://img.shields.io/badge/source-collections-FB6E00?logo=github&style=for-the-badge)](https://github.com/memgraph/mage/tree/main/cpp/collections_module)

| Trait               | Value                                                 |
| ------------------- | ----------------------------------------------------- |
| **Module type**     | <Highlight color="#FB6E00">**algorithm**</Highlight>  |
| **Implementation**  | <Highlight color="#FB6E00">**C++**</Highlight>        |
| **Graph direction** | <Highlight color="#FB6E00">**directed**</Highlight> |
| **Edge weights**    | <Highlight color="#FB6E00">**weighted**</Highlight> |
| **Parallelism**     | <Highlight color="#FB6E00">**sequential**</Highlight> |

## Functions

### `remove_all(first, second)`

Removes elements of the second list from the first list. If a non-existent element is passed, it will be ignored.

#### Input:

- `first: List[Any]` ➡ the list from which elements are to be removed.
- `second: List[Any]` ➡ the list of elements to be removed.


#### Output:

- `List[Any]` ➡ the input list after removing the specified elements.

#### Usage:

```cypher
RETURN collections.remove_all([1, 2, 3, 4, 5], [1, 2, 3, 7]) AS removed;
```

```plaintext
+----------------------------+
| removed                    |
+----------------------------+
| [4, 5]                     |
+----------------------------+
```


### `sum(numbers)`

Calculates the sum of list elements if they are of the same type and can be summed (numeric). If the types are not the same, an exception is thrown. 

#### Input:

- `numbers: List[Any]` ➡ list of elements to be summed up.


#### Output:

- `double` ➡ the sum of all elements in the input list.

#### Usage:

```cypher
CREATE (:A {id:5});
MATCH (a:A) RETURN collections.sum([1, 2.3, -4, a.id]) AS sum;
```

```plaintext
+----------------------------+
| sum                        |
+----------------------------+
| 4.3                        |
+----------------------------+
```


### `union(first, second)`

Unites two lists into one, eliminating duplicates.

#### Input:

- `first: List[Any]` ➡ the first list of elements to be united with another list.
- `second: List[Any]` ➡ the second list of elements to be united with another list.


#### Output:

- `List[Any]` ➡ the union of the inputed lists.

#### Usage:

```cypher
RETURN collections.union([0, 1, 2, 3], [2, 2, 3, 4, 5]) AS union;
```

```plaintext
+----------------------------+
| union                      |
+----------------------------+
| [4, 3, 5, 2, 1, 0]         |
+----------------------------+
```


### `sort(coll)`

Sorts the elements of an input list if they are of the same type. If they are not of the same type, an exception is thrown.

#### Input:

- `coll: List[Any]` ➡ list of elements to be sorted.


#### Output:

- `List[Any]` ➡ list with sorted elements.

#### Usage:

```cypher
RETURN collections.sort([1, 4, 2.3, -5]) AS sorted;
```

```plaintext
+----------------------------+
| sorted                     |
+----------------------------+
| [-5, 1, 2.3, 4]            |
+----------------------------+
```


### `contains_sorted(coll, value)`

Verifies the presence of a certain element in a sorted list. If an unsorted list is passed, there is no guarantee that the result will be correct. For the input list to be sorted, its elements must be comparable and of the same type.

#### Input:

- `coll: List[Any]` ➡ the target list for element search.
- `value: Any` ➡ the element being searched for.


#### Output:

- `bool` ➡ `true` if the element was found, `false` otherwise.

#### Usage:

```cypher
RETURN collections.contains_sorted([1, 2, 3.3, 4.4, 5], 2) AS contains;
```

```plaintext
+----------------------------+
| contains                   |
+----------------------------+
| true                       |
+----------------------------+
```


### `max(values)`

Finds the maximum element in an input list. List elements must be comparable, therefore the same type.

#### Input:

- `values: List[Any]` ➡ the list for finding the maximum element.


#### Output:

- `Any` ➡ the maximum element of the input list.

#### Usage:

```cypher
RETURN collections.max([-1, -2, -3.3]) AS max;
```

```plaintext
+----------------------------+
| max                        |
+----------------------------+
| -1                         |
+----------------------------+
```


### `pairs(list)`

Creates pairs from the input list.

#### Input:

- `list: List[Any]` ➡ the list used to create pairs.


#### Output:

- `List[Any]` ➡ the list containing pairs of elements from the input list.

#### Usage:

```cypher
RETURN collections.pairs([3, "s", 4.4, [1, 2]]) AS pairs;
```

```plaintext
+---------------------------------------------------------+
| pairs                                                   |
+---------------------------------------------------------+
| [[3, "s"], ["s", 4.4], [4.4, [1, 2]], [[1, 2], null]]   |
+---------------------------------------------------------+
```


### `contains(coll, value)`

Verifies if the input value exists in the input list.

#### Input:

- `coll: List[Any]` ➡ the input list on which `contains` is called.
- `value: Any` ➡ the input value that is being searched for in the list.


#### Output:

- `boolean` ➡ `true` if the value is present in the list, otherwise `false`.

#### Usage:

```cypher
RETURN collections.contains([1,2,3], "e") AS output;
```

```plaintext
+---------------------------------------------------------+
| output                                                  |
+---------------------------------------------------------+
| false                                                   |
+---------------------------------------------------------+
```

### `min(values)`

Returns the minimum value within the list. Throws an exception if the elements in the list are not of a uniform data type or if the data type does not support comparison operations.

#### Input:

- `values: List[Any]` ➡ the input list on which the `min` function is called.

#### Output:

- `Any` ➡ the minimum value of the list.

#### Usage:

```cypher
RETURN collections.min([1,2,3]) AS min;
```

```plaintext
+---------------------------------------------------------+
| min                                                     |
+---------------------------------------------------------+
| 1                                                       |
+---------------------------------------------------------+
```

### `union_all(first, second)`

Returns the union of two input lists, including duplicates.

#### Input:

- `first: List[Any]` ➡ the first list to be used in the `union_all` operation.
- `second: List[Any]` ➡ the second list to be used in the `union_all` operation.

#### Output:

- `List[Any]` ➡ the union of two lists, including duplicates.

#### Usage:

```cypher
RETURN collections.union_all([1,1,2,3],[3,"a","b","c"]) AS return_list;
```

```plaintext
+---------------------------------------------------------+
| return_list                                             |
+---------------------------------------------------------+
| [1,1,2,3,3,"a","b","c"]                                 |
+---------------------------------------------------------+
```

### `to_set(values)`

Converts the input list to a set.

#### Input:

- `values: List[Any]` ➡ the list that is to be converted into a set.

#### Output:

- `List[Any]` ➡ the set returned as an `mgp::List` data type.

#### Usage:

```cypher
RETURN collections.to_set([1,2,1,2,3]) AS result;
```

```plaintext
+---------------------------------------------------------+
| result                                                  |
+---------------------------------------------------------+
| [3,2,1]                                                 |
+---------------------------------------------------------+
```

### `sum_longs(numbers)`

Calculates the sum of list elements casted to integers. The initial list elements have to be of type `Numeric`, or an exception is thrown.

#### Input:

- `numbers: List[Any]` ➡ list of numbers.

#### Output:

- `integer` ➡ sum of list elements.

#### Usage:

```cypher
RETURN collections.sum_longs([1.9, 1.9]) AS sum;
```

```plaintext
+---------------------------------------------------------+
| sum                                                     |
+---------------------------------------------------------+
| 2                                                       |
+---------------------------------------------------------+
```

### `avg(numbers)`

Calculates the average of list elements.

#### Input:

- `numbers: List[Any]` ➡ list of numbers.

#### Output:

- `double` ➡ average of list elements.

#### Usage:

```cypher
RETURN collections.avg([5, 5, 6, 7, -5]) AS average;
```

```plaintext
+---------------------------------------------------------+
| average                                                 |
+---------------------------------------------------------+
| 3.6                                                     |
+---------------------------------------------------------+
```

### `contains_all(coll, values)`

Checks if a list contains all the values from another list.

#### Input:

- `coll: List[Any]` ➡ the target list for value search.
- `values: List[Any]` ➡ values being searched for in the target list.

#### Output:

- `boolean` ➡ true if all elements of `values` are contained in the `collection`.

#### Usage:

```cypher
RETURN collections.contains_all([1, 2, 3, "pero"], [1, 1, 1, 1, 2, 3]) AS contained;
```

```plaintext
+---------------------------------------------------------+
| contained                                               |
+---------------------------------------------------------+
| true                                                    |
+---------------------------------------------------------+
```

### `intersection(first, second)`

Returns the unique intersection of two lists.

#### Input:

- `first: List[Any]` ➡ the first list being used in `intersection`.
- `second: List[Any]` ➡ the first list being used in `intersection`.

#### Output:

- `List[Any]` ➡ unique intersection of the two lists.

#### Usage:

```cypher
RETURN collections.intersection([1, 1, 2, 3, 4, 5], [1, 1, 3, 5, 7, 9]) AS intersection;
```

```plaintext
+---------------------------------------------------------+
| intersection                                            |
+---------------------------------------------------------+
| [3, 5, 1]                                               |
+---------------------------------------------------------+
```
## Procedures

### `split(inputList, delimiter)`

Splits the provided list based on a specified delimiter. Returns a series of sublists generated by breaking the original list wherever the delimiter is encountered. The delimiter itself is not included in the resulting sublists.

#### Input:

- `inputList: List[Any]` ➡ the list that is to be splitted.
- `delimiter: Any` ➡ element in the list that determines the point at which the list should be splitted.

#### Output:

- `splitted: List[Any]` ➡ sublists of the original list.

#### Usage:

```cypher
CALL collections.split([2, 4, "0", 0, 3.3, 9, 0, 5], 0) YIELD splitted RETURN splitted;
```

```plaintext
+----------------------------+
| splitted                   |
+----------------------------+
| [2, 4, "0"]                |
+----------------------------+
| [3.3, 9]                   |
+----------------------------+
| [5]                        |
+----------------------------+
```

### `partition(list, partition_size)`

Partitions the input list into sub-lists of the specified `partition_size`.

#### Input:

- `list: List[Any]` ➡ the list that is to be partitioned.
- `partition_size: integer` ➡ the size of the sub-lists.

#### Output:

- `result: List[Any]` ➡ the partitioned sub-lists.

#### Usage:

```cypher
CALL collections.partition([1,2,3,4,5,6],2) YIELD result RETURN result;
```

```plaintext
+---------------------------------------------------------+
| result                                                  |
+---------------------------------------------------------+
| [1,2]                                                   |
+---------------------------------------------------------+
| [3,4]                                                   |
+---------------------------------------------------------+
| [5,6]                                                   |
+---------------------------------------------------------+
```