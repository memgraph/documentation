import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'


# Java client guide 

## Quickstart 

Learn how to create a Java application that connects to the Memgraph database and executes simple queries. 
This will introduce you to the basics of Memgraph and the Java driver. This guide is based on the driver version v5 and above. Some examples may 
not be supported in older versions of the driver.

<Callout type="info"> 
Prerequisite for following this guides is to have [Java 17](https://www.oracle.com/java/technologies/downloads/) and [docker](https://docs.docker.com/get-docker/) in your local environment. 
</Callout>

<Steps>

### Run Memgraph 

Start by running Memgraph in background. The easiest way to start Memgraph is to use Docker image, and start the container with the following command:

```bash
docker run -it -p 7687:7687 -p 7444:7444 -p 3000:3000 memgraph/memgraph-platform
```

This will start Memgraph platform, that includes, Memgraph database, Memgraph Lab and Memgraph MAGE. Memgraph uses Bolt protocol to communicate with the Java client, 
for that you need to expose the port 7687. Memgraph Lab is a web application that you can use to visualize your data, it is available on port 3000, and port 7444 is used for
logs that are visible in the Memgraph Lab. If the Memgraph Platform is running properly, open a URL http://localhost:3000 in your browser and you should see the Memgraph Lab UI.


### Open a favorite Java IDE

Start a new empty project in your favorite Java IDE, Eclipse, IntelliJ, VScode or any other. This step will depend on what type of aplication you are trying to build, but having a bare-bone project with a single file is enough for this guide.

### Add a dependecies for you project 

In order to use the Java driver you will need to add dependecies. If you are using Maven, add the following dependecies to your pom.xml file:

```xml
<dependencies>
  <dependency>
    <groupId>org.neo4j.driver</groupId>
    <artifactId>neo4j-java-driver</artifactId>
    <version>5.11</version>
  </dependency>
  </dependencies>
```

If you are using Gradle, add the following dependecies to your build.gradle file:

```groovy
dependencies {
    implementation 'org.neo4j.driver:neo4j-java-driver:5.11'
}
```

### Write minimal working example 




In the next step, initialize a new Go module via the following command:

```bash
go mod init hello-memgraph
```

You just used a go tool to create a new module file go.mod that takes care of your dependencies, if you are not familiar with it take a look at 
the basic guide on [how to write a Go code](https://go.dev/doc/code). 

## Basic Setup

We'll be using Eclipse IDE 2022-12 on MacOS to connect a simple Java
console application to a running Memgraph instance using **Maven**. If you're
using a different IDE, the steps might be slightly different, but the code is
probably the same or very similar.<br />

Let's jump in and connect a simple program to Memgraph.

**1.** Open **Eclipse** and create a new **Maven project**.<br /> **2.** Select
the **Create a simple project** option.<br /> **3.** For the **Group Id** field
put `com.memgraph.app` and for **Artifact Id** put `my-app` . Afterwards, click
the **Finish** button.<br /> **4.** Open the `pom.xml` file and add the
dependencies inside your project:

```java
<dependencies>
	<dependency>
	  <groupId>org.neo4j.driver</groupId>
	  <artifactId>neo4j-java-driver</artifactId>
	  <version>5.4.0</version>
	</dependency>
  </dependencies>
```

**5.** Create the `HelloWorld.java` program and copy the following code:

```java
import org.neo4j.driver.AuthTokens;
import org.neo4j.driver.Driver;
import org.neo4j.driver.GraphDatabase;
import org.neo4j.driver.Query;

import static org.neo4j.driver.Values.parameters;

public class HelloWorld implements AutoCloseable
{
    private final Driver driver;

    public HelloWorld( String uri, String user, String password )
    {
        driver = GraphDatabase.driver( uri, AuthTokens.basic( user, password ) );
    }

    public void close() throws Exception
    {
        driver.close();
    }

    public void printGreeting( final String message )
    {
    	
    	try (var session = driver.session()) {
    		var hello = session.executeWrite( transaction -> {
    		var query = new Query("CREATE (a:Greeting) SET a.message = $message RETURN 'Node ' + id(a) + ': ' + a.message", parameters("message", message));
    		var result = transaction.run(query);
    		return result.single().get(0).asString();
    		});
    		System.out.println(hello);
    	}
    }
    
    public static void main( String... args ) throws Exception
    {
        try ( HelloWorld greeter = new HelloWorld( "bolt://localhost:7687", "", "" ) )
        {
            greeter.printGreeting( "Hello, World!" );
        }
    }
}
```

Once you run the program, you should see an output similar to the following:

```
Node 1: Hello, World!
```

<Callout type="info">
Memgraph created [Bolt Java Driver](https://github.com/memgraph/bolt-java-driver) which can be used to connect to a running Memgraph instance. We still recommend you use the above mentioned driver.
</Callout>

## Where to next?

For real-world examples of how to use Memgraph, we suggest you take a look at
the **[Tutorials](/)** page. You can also browse through
the **[How-to guides](/)** section to get an overview
of all the functionalities Memgraph offers.