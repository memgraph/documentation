import { Callout } from 'nextra/components'

# Connect to database

To connect to your database Memgraph depends on the (Neo4j Golang driver)[https://pkg.go.dev/github.com/neo4j/neo4j-go-driver/v5/neo4j#pkg-types]. Memgraph and Neo4j both support bolt protocol and Cypher queries, 
which means that you can use the same driver to connect to both databases. This is very convenient if you want to switch between the two databases. This guide is based on the driver version v5 and above. Some examples may 
not be supported in older versions of the driver.


## Connect without authentication

To connect a Go driver to the Memgraph database, you can use the following snippet: 

```go
dbUri := "bolt://localhost:7687" // (Default Memgraph Bolt port is 7687)
driver, err := neo4j.NewDriverWithContext(dbUri, neo4j.BasicAuth("", "", ""))
```

Notice that BasicAuth takes three arguments, the first two are username and password, and the third one is the realm. 
For both username and password, you can pass an empty string, this means that you are connecting without authentication.

## Connect with authentication

If you have enabled authentication in Memgraph by setting a proper username and password, like this: 

```Cypher
CREATE USER `memgraph` IDENTIFIED BY 'memgraph';
```

Then, you can connect to the database with the following snippet:

```go
dbUser := "memgraph"
dbPassword := "memgraph"
dbUri := "bolt://localhost:7687" // (Default Memgraph Bolt port is 7687)
driver, err := neo4j.NewDriverWithContext(dbUri, neo4j.BasicAuth(dbUser, dbPassword, ""))
```

If you get and error like this: 

```panic: Neo4jError: Memgraph.ClientError.Security.Unauthenticated (Authentication failure)```
    
Then you have probably enabled authentication in Memgraph, but you are trying to connect without authentication.

## Go client lifecycle management 

It is sufficient to open a single client connection to Memgraph and use it for all your queries. Once client connection is open, we can use 
Go (context)[https://pkg.go.dev/context] to manage the lifecycle of the client. The lifecycle of the client is tied to your application livecycle.

```go
ctx := context.Background()
defer driver.Close(ctx)
```