---
title: Migrate from Memgraph Platform to Memgraph MAGE
description: Switch from legacy version of Memgraph Platform to Memgraph MAGE.
---

import { Card, Cards } from 'nextra/components'
import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'

# Migrate from Memgraph Platform to Memgraph MAGE

Memgraph Platform was deployed as a single Docker image until version 2.15.
Starting with version 2.15, the platform has transitioned to a multi-container
application. This upgrade separates the previous single Docker image into
individual containers for Memgraph+MAGE and Memgraph Lab.

If you are running an older version of Memgraph Platform (versions up to 2.15),
you can migrate your data to the newer version of Memgraph using one of the
methods described below.

## Creating a Snapshot

A snapshot in Memgraph is a backup of your database. Here's how you can create one:

1. Run the following query in `mgconsole` or Memgraph Lab:
```cypher
CREATE SNAPSHOT;
```
The snapshot is saved in the `snapshots` directory of the data directory (`/var/lib/memgraph`).

## Restoring a Snapshot

To restore a snapshot, you can follow these steps:

1. Copy the backed-up snapshot file into the `snapshots` directory after creating the container and start the database. The commands should look like this:
```bash
docker create -p 7687:7687 -p 7444:7444 -v `snapshots`:/var/lib/memgraph/snapshots --name memgraphDB memgraph/memgraph
tar -cf - sample_snapshot_file | docker cp -a - memgraphDB:/var/lib/memgraph/snapshots
```
The `sample_snapshot_file` is the snapshot file you want to use to restore the data. 

2. After that, start the database with:
```bash
docker start -a memgraphDB
```
The `-a` flag is used to attach to the container's output so you can see the logs.

3. Once Memgraph is started, change the snapshot directory ownership to the `memgraph` user by running the following command:
```bash
docker exec -it -u 0 memgraphDB bash -c "chown memgraph:memgraph /var/lib/memgraph/snasphots"
```
Otherwise, Memgraph will not be able to write the future snapshot files and will fail.

For more detailed instructions, you can refer to the [Memgraph documentation](https://memgraph.com/docs/configuration/data-durability-and-backup).